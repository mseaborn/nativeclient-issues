<ns0:entry xmlns:ns0="http://www.w3.org/2005/Atom" xmlns:ns1="http://schemas.google.com/g/2005" xmlns:ns2="http://schemas.google.com/projecthosting/issues/2009" ns1:etag="W/&quot;D0AMSH47eCl7ImA9WhdaFkw.&quot;">
		<ns0:id>http://code.google.com/feeds/issues/p/nativeclient/issues/full/2385</ns0:id><ns0:author>
			<ns0:name>euge...@google.com</ns0:name><ns0:uri>/u/101600367715055138223/</ns0:uri></ns0:author><ns0:content type="html">Reported by Valgrind on NaCl/Chrome integration bots:
http://build.chromium.org/p/client.nacl.chrome/builders/lucid64-valgrind-nacl-chrome/builds/320/steps/nacl_integration/logs/stdio

Syscall param socketcall.sendmsg(msg.msg_iov[i]) points to uninitialised byte(s)
  0x94C7F2D (/build/buildd/eglibc-2.11.1/nptl/../sysdeps/unix/syscall-template.S:82)
  nacl::SendDatagram(int, nacl::MessageHeader const*, int) (native_client/src/shared/imc/linux/nacl_imc.cc:130)
  NaClSendDatagram (native_client/src/shared/imc/nacl_imc_c.cc:43)
  NaClDescImcDescSendMsg (native_client/src/trusted/desc/nacl_desc_imc.c:191)
  NaClImcSendTypedMessage (native_client/src/trusted/desc/nrd_xfer.c:365)
  ImcSendmsg (native_client/src/shared/srpc/nacl_srpc_message.c:98)
  NaClSrpcMessageChannelSend (native_client/src/shared/srpc/nacl_srpc_message.c:922)
  SrpcSendMessage (native_client/src/shared/srpc/rpc_serialize.c:822)
  RpcCheckingClosureRun (native_client/src/shared/srpc/rpc_serialize.c:891)
  NaClSrpcClosureRunner::~NaClSrpcClosureRunner() (./native_client/src/shared/srpc/nacl_srpc.h:273)
  PpbFontRpcServer::PPB_Font_Describe(NaClSrpcRpc*, NaClSrpcClosure*, int, unsigned int*, char*, unsigned int*, char*, unsigned int*, char*, int*) (ppapi/native_client/src/shared/ppapi_proxy/browser_ppb_font_rpc_server.cc:113)
  (anonymous namespace)::PPB_Font_DescribeDispatcher(NaClSrpcRpc*, NaClSrpcArg**, NaClSrpcArg**, NaClSrpcClosure*) (ppapi/native_client/src/shared/ppapi_proxy/ppb_rpc_server.cc:832)
  NaClSrpcReceiveAndDispatch (native_client/src/shared/srpc/rpc_serialize.c:1108)
  NaClSrpcRpcWait (native_client/src/shared/srpc/rpc_serialize.c:1147)
  NaClSrpcInvokeV (native_client/src/shared/srpc/invoke.c:148)
  NaClSrpcInvokeVaList (native_client/src/shared/srpc/invoke.c:375)
  NaClSrpcInvokeBySignature (native_client/src/shared/srpc/invoke.c:442)
  PppInstanceRpcClient::PPP_Instance_DidChangeView(NaClSrpcChannel*, int, unsigned int, int*, unsigned int, int*) (ppapi/native_client/src/shared/ppapi_proxy/ppp_rpc_client.cc:227)
  ppapi_proxy::(anonymous namespace)::DidChangeView(int, PP_Rect const*, PP_Rect const*) (ppapi/native_client/src/shared/ppapi_proxy/browser_ppp_instance.cc:126)
  plugin::Plugin::DidChangeView(pp::Rect const&amp;amp;, pp::Rect const&amp;amp;) (ppapi/native_client/src/trusted/plugin/plugin.cc:1066)
  plugin::Plugin::StartProxiedExecution(NaClSrpcChannel*, plugin::ErrorInfo*) (ppapi/native_client/src/trusted/plugin/plugin.cc:1390)
  plugin::SrpcClient::StartJSObjectProxy(plugin::Plugin*, plugin::ErrorInfo*) (ppapi/native_client/src/trusted/plugin/srpc_client.cc:78)
  plugin::NaClSubprocess::StartJSObjectProxy(plugin::Plugin*, plugin::ErrorInfo*) (ppapi/native_client/src/trusted/plugin/nacl_subprocess.cc:52)
  plugin::Plugin::StartJSObjectProxy(plugin::NaClSubprocess*, plugin::ErrorInfo*) (ppapi/native_client/src/trusted/plugin/plugin.cc:698)
  plugin::Plugin::LoadNaClModuleContinuationIntern(plugin::ErrorInfo*) (ppapi/native_client/src/trusted/plugin/plugin.cc:732)
  plugin::Plugin::NexeFileDidOpenContinuation(int) (ppapi/native_client/src/trusted/plugin/plugin.cc:1223)
  pp::CompletionCallbackFactory&amp;lt;plugin::Plugin, pp::NonThreadSafeRefCount&amp;gt;::Dispatcher0&amp;lt;void (plugin::Plugin::*)(int)&amp;gt;::operator()(plugin::Plugin*, int) (native_client/src/third_party/ppapi/cpp/completion_callback.h:536)
  pp::CompletionCallbackFactory&amp;lt;plugin::Plugin, pp::NonThreadSafeRefCount&amp;gt;::CallbackData&amp;lt;pp::CompletionCallbackFactory&amp;lt;plugin::Plugin, pp::NonThreadSafeRefCount&amp;gt;::Dispatcher0&amp;lt;void (plugin::Plugin::*)(int)&amp;gt; &amp;gt;::Thunk(void*, int) (native_client/src/third_party/ppapi/cpp/completion_callback.h:520)
  base::internal::Invoker2&amp;lt;false, base::internal::InvokerStorage2&amp;lt;void (*)(void*, int), void*, int&amp;gt;, void (*)(void*, int)&amp;gt;::DoInvoke(base::internal::InvokerStorageBase*) (./base/bind_internal.h:928)
  base::Callback&amp;lt;void ()()&amp;gt;::Run() const (./base/callback.h:269)

Address 0x1619a474 is 4 bytes inside a block of size 48 alloc'd
  malloc (/mnt/data/build/slave/full_valgrind/build/third_party/valgrind64/coregrind/m_replacemalloc/vg_replace_malloc.c:913)
  AddNonfixedForRead (native_client/src/shared/srpc/rpc_serialize.c:287)
  RecvRequest (native_client/src/shared/srpc/rpc_serialize.c:449)
  NaClSrpcReceiveAndDispatch (native_client/src/shared/srpc/rpc_serialize.c:1053)
  NaClSrpcRpcWait (native_client/src/shared/srpc/rpc_serialize.c:1147)
  NaClSrpcInvokeV (native_client/src/shared/srpc/invoke.c:148)
  NaClSrpcInvokeVaList (native_client/src/shared/srpc/invoke.c:375)
  NaClSrpcInvokeBySignature (native_client/src/shared/srpc/invoke.c:442)
  PppInstanceRpcClient::PPP_Instance_DidChangeView(NaClSrpcChannel*, int, unsigned int, int*, unsigned int, int*) (ppapi/native_client/src/shared/ppapi_proxy/ppp_rpc_client.cc:227)
  ppapi_proxy::(anonymous namespace)::DidChangeView(int, PP_Rect const*, PP_Rect const*) (ppapi/native_client/src/shared/ppapi_proxy/browser_ppp_instance.cc:126)
  plugin::Plugin::DidChangeView(pp::Rect const&amp;amp;, pp::Rect const&amp;amp;) (ppapi/native_client/src/trusted/plugin/plugin.cc:1066)
  plugin::Plugin::StartProxiedExecution(NaClSrpcChannel*, plugin::ErrorInfo*) (ppapi/native_client/src/trusted/plugin/plugin.cc:1390)
  plugin::SrpcClient::StartJSObjectProxy(plugin::Plugin*, plugin::ErrorInfo*) (ppapi/native_client/src/trusted/plugin/srpc_client.cc:78)
  plugin::NaClSubprocess::StartJSObjectProxy(plugin::Plugin*, plugin::ErrorInfo*) (ppapi/native_client/src/trusted/plugin/nacl_subprocess.cc:52)
  plugin::Plugin::StartJSObjectProxy(plugin::NaClSubprocess*, plugin::ErrorInfo*) (ppapi/native_client/src/trusted/plugin/plugin.cc:698)
  plugin::Plugin::LoadNaClModuleContinuationIntern(plugin::ErrorInfo*) (ppapi/native_client/src/trusted/plugin/plugin.cc:732)
  plugin::Plugin::NexeFileDidOpenContinuation(int) (ppapi/native_client/src/trusted/plugin/plugin.cc:1223)
  pp::CompletionCallbackFactory&amp;lt;plugin::Plugin, pp::NonThreadSafeRefCount&amp;gt;::Dispatcher0&amp;lt;void (plugin::Plugin::*)(int)&amp;gt;::operator()(plugin::Plugin*, int) (native_client/src/third_party/ppapi/cpp/completion_callback.h:536)
  pp::CompletionCallbackFactory&amp;lt;plugin::Plugin, pp::NonThreadSafeRefCount&amp;gt;::CallbackData&amp;lt;pp::CompletionCallbackFactory&amp;lt;plugin::Plugin, pp::NonThreadSafeRefCount&amp;gt;::Dispatcher0&amp;lt;void (plugin::Plugin::*)(int)&amp;gt; &amp;gt;::Thunk(void*, int) (native_client/src/third_party/ppapi/cpp/completion_callback.h:520)
  base::internal::Invoker2&amp;lt;false, base::internal::InvokerStorage2&amp;lt;void (*)(void*, int), void*, int&amp;gt;, void (*)(void*, int)&amp;gt;::DoInvoke(base::internal::InvokerStorageBase*) (./base/bind_internal.h:928)
  base::Callback&amp;lt;void ()()&amp;gt;::Run() const (./base/callback.h:269)
  MessageLoop::RunTask(MessageLoop::PendingTask const&amp;amp;) (base/message_loop.cc:495)
  MessageLoop::DeferOrRunPendingTask(MessageLoop::PendingTask const&amp;amp;) (base/message_loop.cc:508)
  MessageLoop::DoWork() (base/message_loop.cc:698)
  base::MessagePumpDefault::Run(base::MessagePump::Delegate*) (base/message_pump_default.cc:23)
  MessageLoop::RunInternal() (base/message_loop.cc:453)
  MessageLoop::RunHandler() (base/message_loop.cc:426)
  MessageLoop::Run() (base/message_loop.cc:341)
  RendererMain(MainFunctionParams const&amp;amp;) (content/renderer/renderer_main.cc:228)
  (anonymous namespace)::RunZygote(MainFunctionParams const&amp;amp;, content::ContentMainDelegate*) (content/app/content_main.cc:222)


To reproduce:
1. Build Chromium as described at http://dev.chromium.org/developers/how-tos/using-valgrind, omitting the &amp;quot;target_arch=ia32&amp;quot; GYP define.
2. Run xvfb-run --auto-servernum ./scons  buildbot=memcheck-browser-tests  -k platform=x86-64 disable_dynamic_plugin_loading=1 chrome_browser_path=$CHROMIUM_SRC/out/Release/chrome override_chrome_irt=1 run_ppapi_example_font_test</ns0:content><ns0:updated>2011-10-26T07:56:29.000Z</ns0:updated><ns0:published>2011-10-25T12:04:21.000Z</ns0:published><ns2:status>Fixed</ns2:status><ns2:owner>
			<ns2:uri>/u/101600367715055138223/</ns2:uri><ns2:username>euge...@google.com</ns2:username></ns2:owner><ns2:state>closed</ns2:state><ns0:title>Uninitialized bytes in PPB_Font_Describe SRPC response</ns0:title><ns2:label>Type-Defect</ns2:label><ns2:label>Mstone-X</ns2:label><ns2:label>Pri-2</ns2:label><ns0:link href="http://code.google.com/feeds/issues/p/nativeclient/issues/2385/comments/full" rel="replies" type="application/atom+xml" /><ns0:link href="http://code.google.com/p/nativeclient/issues/detail?id=2385" rel="alternate" type="text/html" /><ns0:link href="https://code.google.com/feeds/issues/p/nativeclient/issues/full/2385" rel="self" type="application/atom+xml" /><ns2:stars>1</ns2:stars><ns2:closedDate>2011-10-26T07:54:29.000Z</ns2:closedDate><ns2:id>2385</ns2:id></ns0:entry>