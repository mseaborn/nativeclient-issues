<ns0:entry xmlns:ns0="http://www.w3.org/2005/Atom" xmlns:ns1="http://schemas.google.com/g/2005" xmlns:ns2="http://schemas.google.com/projecthosting/issues/2009" ns1:etag="W/&quot;C0MGRn47eCl7ImA9WhZXFkg.&quot;">
		<ns0:id>http://code.google.com/feeds/issues/p/nativeclient/issues/full/1771</ns0:id><ns0:author>
			<ns0:name>s...@google.com</ns0:name><ns0:uri>/u/108394971971967673680/</ns0:uri></ns0:author><ns0:content type="html">When JavaScript queries the plugin for whether it has loaded correctly, one of three locations responds.

1) Before an instance of the NaCl trusted plugin is running, the DOM node for the embed tag responds, and does not have a __moduleReady property, so the result is &amp;quot;undefined&amp;quot;.
2) When the NaCl trusted plugin is running, but the nexe has not yet started, the trusted plugin responds, and is written to return 0.
3) Once a PPAPI nexe is running, the proxy is queried, and the nexe itself is responsible for providing an answer.

A similar situation exists for dispatchEvent, which is used by the NaCl trusted plugin to dispatch progress events (at least).  The trusted plugin has to be running to dispatch events, so only cases (2) and (3) are possible, except for methods &amp;quot;HasMethod&amp;quot; from a plugin returning false will result in asking the embed DOM node.  Case (2) is already handled by having the plugin respond that it has no &amp;quot;dispatchEvent&amp;quot; method.  But case (3) again would require the nexe to implement code in HasMethod to refuse dispatchEvent and let the embed DOM node handle it.

The trusted plugin already handles both correctly, but the proxy should filter out both of these processing steps and eliminate any need for this in nexes.</ns0:content><ns0:updated>2011-05-06T03:10:27.000Z</ns0:updated><ns0:published>2011-05-04T15:22:26.000Z</ns0:published><ns2:status>Fixed</ns2:status><ns2:owner>
			<ns2:uri>/u/108394971971967673680/</ns2:uri><ns2:username>s...@google.com</ns2:username></ns2:owner><ns2:cc>
			<ns2:uri>/u/113511172007743761909/</ns2:uri><ns2:username>cstefan...@google.com</ns2:username></ns2:cc><ns2:cc>
			<ns2:uri>/u/101953680983947802512/</ns2:uri><ns2:username>pol...@google.com</ns2:username></ns2:cc><ns2:state>closed</ns2:state><ns0:title>__moduleReady and dispatchEvent should be answered by the proxy rather than the nexe.</ns0:title><ns2:label>Type-Defect</ns2:label><ns2:label>Pri-0</ns2:label><ns2:label>Component-Pepper</ns2:label><ns2:label>OS-All</ns2:label><ns2:label>Arch-All</ns2:label><ns0:link href="http://code.google.com/feeds/issues/p/nativeclient/issues/1771/comments/full" rel="replies" type="application/atom+xml" /><ns0:link href="http://code.google.com/p/nativeclient/issues/detail?id=1771" rel="alternate" type="text/html" /><ns0:link href="https://code.google.com/feeds/issues/p/nativeclient/issues/full/1771" rel="self" type="application/atom+xml" /><ns2:stars>1</ns2:stars><ns2:closedDate>2011-05-06T03:10:27.000Z</ns2:closedDate><ns2:id>1771</ns2:id></ns0:entry>