<ns0:entry xmlns:ns0="http://www.w3.org/2005/Atom" xmlns:ns1="http://schemas.google.com/g/2005" xmlns:ns2="http://schemas.google.com/projecthosting/issues/2009" ns1:etag="W/&quot;DE4NQX47eCl7ImA9WhdSEko.&quot;">
		<ns0:id>http://code.google.com/feeds/issues/p/nativeclient/issues/2043/comments/full/10</ns0:id><ns0:author>
			<ns0:name>mseaborn@chromium.org</ns0:name><ns0:uri>/u/mseaborn@chromium.org/</ns0:uri></ns0:author><ns0:content type="html">OK, I just tried this on OS X 10.5.8 running exactly the same binaries, and it failed there too.  This does not surprise me, because I doubt much has changed in the way of address space allocation between 10.5 and 10.6.  Even if it did work, I would be reluctant to rely on 10.5's PIE address space being different from 10.6.

I had assumed that the top 1GB at 0xc0000000 would be reserved for the kernel.  However, experimentation shows that I can map pages with MAP_FIXED from 0xc0000000 upto 0xffe00000, i.e. all but the top 2MB.

So maybe we could allocate a 1022MB untrusted address space at 0xc0000000, but I don't know if I want to rely on exact knowledge of the address space layout like this.  Also, sadly, there is NaCl code that assumes the address space size is a power of 2.  That's fixable, but it will take time.</ns0:content><ns0:updated>2011-07-21T19:36:30.000Z</ns0:updated><ns0:published>2011-07-21T19:36:30.000Z</ns0:published><ns2:updates>
			<ns2:ccUpdate>tlamb...@chromium.org</ns2:ccUpdate></ns2:updates><ns0:title>Comment 10 by mseaborn@chromium.org</ns0:title><ns0:link href="http://code.google.com/p/nativeclient/issues/detail?id=2043#c10" rel="alternate" type="text/html" /><ns0:link href="https://code.google.com/feeds/issues/p/nativeclient/issues/2043/comments/full/10" rel="self" type="application/atom+xml" /></ns0:entry>