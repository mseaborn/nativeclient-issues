<ns0:entry xmlns:ns0="http://www.w3.org/2005/Atom" xmlns:ns1="http://schemas.google.com/g/2005" xmlns:ns2="http://schemas.google.com/projecthosting/issues/2009" ns1:etag="W/&quot;A0YBSX47eCl7ImA9WhdUFkg.&quot;">
		<ns0:id>http://code.google.com/feeds/issues/p/nativeclient/issues/2293/comments/full/10</ns0:id><ns0:author>
			<ns0:name>dmichael@chromium.org</ns0:name><ns0:uri>/u/dmichael@chromium.org/</ns0:uri></ns0:author><ns0:content type="html">"There's a comment in URLResponseInfo that seems not to be honored in the execution Robert calls out:"

That is why the reference count is not incremented upon construction of URL_ResponseInfo within URLLoader::GetResponseInfo. What Robert is observing is the copy constructor of URL_ResponseInfo _does_ increment the reference count (unless it's elided, as GCC does in this case).

The 'PassRef' constructor is less about optimizing out reference counting, and more about keeping the reference count correct. The idea is that the browser passed the URL_ResponseInfo with 1 reference count, that the browser relinquishes and the plugin takes over. That said... under normal circumstances, you should not have to tell the browser about changes to the reference count until the plugin is completely finished with it (I know we've had this discussion, and I've gotten further convinced that Neb was mistaken about this. The Chrome IPC proxy does exactly the kind of reference counting that you and I imagined was appropriate.)</ns0:content><ns0:updated>2011-10-03T16:25:58.000Z</ns0:updated><ns0:published>2011-10-03T16:25:58.000Z</ns0:published><ns2:updates /><ns0:title>Comment 10 by dmichael@chromium.org</ns0:title><ns0:link href="http://code.google.com/p/nativeclient/issues/detail?id=2293#c10" rel="alternate" type="text/html" /><ns0:link href="https://code.google.com/feeds/issues/p/nativeclient/issues/2293/comments/full/10" rel="self" type="application/atom+xml" /></ns0:entry>