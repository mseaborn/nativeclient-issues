<ns0:entry xmlns:ns0="http://www.w3.org/2005/Atom" xmlns:ns1="http://schemas.google.com/g/2005" xmlns:ns2="http://schemas.google.com/projecthosting/issues/2009" ns1:etag="W/&quot;CkIHSH47eCl7ImA9Wx9WFkg.&quot;">
		<ns0:id>http://code.google.com/feeds/issues/p/nativeclient/issues/791/comments/full/2</ns0:id><ns0:author>
			<ns0:name>bugdro...@chromium.org</ns0:name><ns0:uri>/u/101788990881243245974/</ns0:uri></ns0:author><ns0:content type="html">The following revision refers to this bug:
    http://src.chromium.org/viewvc/chrome?view=rev&amp;revision=2973

------------------------------------------------------------------------
r2973 | mseaborn@chromium.org | Thu Aug 12 05:43:56 PDT 2010

Changed paths:
 M http://src.chromium.org/viewvc/chrome/trunk/src/native_client/src/trusted/plugin/npapi/plugin_npapi.cc?r1=2973&amp;r2=2972&amp;pathrev=2973
 M http://src.chromium.org/viewvc/chrome/trunk/src/native_client/src/trusted/plugin/plugin.cc?r1=2973&amp;r2=2972&amp;pathrev=2973
 M http://src.chromium.org/viewvc/chrome/trunk/src/native_client/tests/fake_browser/nacl.scons?r1=2973&amp;r2=2972&amp;pathrev=2973
 A http://src.chromium.org/viewvc/chrome/trunk/src/native_client/tests/fake_browser/spin.c?r1=2973&amp;r2=2972&amp;pathrev=2973
 M http://src.chromium.org/viewvc/chrome/trunk/src/native_client/tests/fake_browser/fake_browser_test.cc?r1=2973&amp;r2=2972&amp;pathrev=2973

Plugin: Fix memory and thread leak when assigning to "src" twice

Call ShutDownSubprocess() after the download has completed before
launching the new process, in addition to doing it when the download
is initiated.

Add test that can reproduce the problem in conjunction with valgrind.

BUG=http://code.google.com/p/nativeclient/issues/detail?id=791
TEST=run_fake_browser_test + valgrind on Linux

Review URL: http://codereview.chromium.org/3090015
------------------------------------------------------------------------</ns0:content><ns0:updated>2011-01-21T22:55:39.000Z</ns0:updated><ns0:published>2011-01-21T22:55:39.000Z</ns0:published><ns2:updates /><ns0:title>Comment 2 by bugdro...@chromium.org</ns0:title><ns0:link href="http://code.google.com/p/nativeclient/issues/detail?id=791#c2" rel="alternate" type="text/html" /><ns0:link href="https://code.google.com/feeds/issues/p/nativeclient/issues/791/comments/full/2" rel="self" type="application/atom+xml" /></ns0:entry>