<ns0:entry xmlns:ns0="http://www.w3.org/2005/Atom" xmlns:ns1="http://schemas.google.com/g/2005" xmlns:ns2="http://schemas.google.com/projecthosting/issues/2009" ns1:etag="W/&quot;CkMESX47eCl7ImA9WhVaEU8.&quot;">
		<ns0:id>http://code.google.com/feeds/issues/p/nativeclient/issues/full/2645</ns0:id><ns0:author>
			<ns0:name>jvo...@google.com</ns0:name><ns0:uri>/u/102292187274959663599/</ns0:uri></ns0:author><ns0:content type="html">&lt;b&gt;- Where are we today?&lt;/b&gt;

There are lots of test NMF files that are actually really basic. They just need to point to the compiled nexe.

Furthermore, these files are split across the nacl and chrome repo.


&lt;b&gt;- Why is this a problem?&lt;/b&gt;

Since these files are all over the place AND split across two repos (native_client/tests, and ppapi/native_client/tests), this makes porting these tests over to use pnacl pexes, involve changing files all over the place.

Furthermore, for pnacl, we want the nmf to just say

' &amp;quot;portable&amp;quot;: ...'

 instead of

' &amp;quot;x86-32&amp;quot;: ..., &amp;quot;x86-64&amp;quot;: ..., &amp;quot;arm&amp;quot;: ..., &amp;quot;portable&amp;quot;: ...'.

Having an architecture-specific URL makes the browser's manifest resolver prefer that architecture-specific file (according to the spec)! An override is the &amp;quot;NACL_PREFER_PORTABLE_IN_MANIFEST=1&amp;quot; environment variable, but it will be gross to duplicate all over the place, and people will forget to do that.

We also end up having lots of nacl.scons goo that tries to name the nexe in a way that matches the NMF url.  These urls end up with architecture suffixes, and .nexe suffixes, etc.  This will end up needing to change to handle a .pexe suffix.


&lt;b&gt;- The proposed enhancement:&lt;/b&gt;

The most basic NMFs are autogenerated. Some of the negative tests will need to keep NMF files that have custom cross-origin URLs and what-not. The manifest file open test will need to keep its file dictionary.

&lt;b&gt;- Exit criteria:&lt;/b&gt;

It's easy to port almost all browser tests to pnacl.

&lt;b&gt;- Anticipated impact:&lt;/b&gt;

It's easier to port almost all browser tests to pnacl, and people no longer need to write basic NMF files by hand.

</ns0:content><ns0:updated>2012-06-08T01:53:28.000Z</ns0:updated><ns0:published>2012-03-07T18:39:51.000Z</ns0:published><ns2:status>Fixed</ns2:status><ns2:state>closed</ns2:state><ns0:title>Attempt to generate NMF files for all scons tests.</ns0:title><ns2:label>Type-Enhancement</ns2:label><ns2:label>Pri-2</ns2:label><ns2:label>Component-Infrastructure</ns2:label><ns2:label>OS-All</ns2:label><ns0:link href="http://code.google.com/feeds/issues/p/nativeclient/issues/2645/comments/full" rel="replies" type="application/atom+xml" /><ns0:link href="http://code.google.com/p/nativeclient/issues/detail?id=2645" rel="alternate" type="text/html" /><ns0:link href="https://code.google.com/feeds/issues/p/nativeclient/issues/full/2645" rel="self" type="application/atom+xml" /><ns2:stars>2</ns2:stars><ns2:closedDate>2012-04-20T20:51:33.000Z</ns2:closedDate><ns2:id>2645</ns2:id></ns0:entry>