<ns0:entry xmlns:ns0="http://www.w3.org/2005/Atom" xmlns:ns1="http://schemas.google.com/g/2005" xmlns:ns2="http://schemas.google.com/projecthosting/issues/2009" ns1:etag="W/&quot;CEMBQ347eCl7ImA9WhdRGEk.&quot;">
		<ns0:id>http://code.google.com/feeds/issues/p/nativeclient/issues/2005/comments/full/2</ns0:id><ns0:author>
			<ns0:name>bugdro...@chromium.org</ns0:name><ns0:uri>/u/101788990881243245974/</ns0:uri></ns0:author><ns0:content type="html">The following revision refers to this bug:
    http://src.chromium.org/viewvc/native_client?view=rev&amp;revision=6351

------------------------------------------------------------------------
r6351 | kschimpf@google.com | Mon Aug 08 15:22:04 PDT 2011

Changed paths:
 A http://src.chromium.org/viewvc/native_client/trunk/src/native_client/src/trusted/validator_x86/testdata/32/bad-jmp.ndis?r1=6351&amp;r2=6350&amp;pathrev=6351
 M http://src.chromium.org/viewvc/native_client/trunk/src/native_client/src/trusted/validator/x86/ncval_seg_sfi/ncvalidate.c?r1=6351&amp;r2=6350&amp;pathrev=6351
 A http://src.chromium.org/viewvc/native_client/trunk/src/native_client/src/trusted/validator_x86/testdata/32/bad-jmp.nvals?r1=6351&amp;r2=6350&amp;pathrev=6351
 M http://src.chromium.org/viewvc/native_client/trunk/src/native_client/src/trusted/validator_x86/testdata/32/test-4.nvals?r1=6351&amp;r2=6350&amp;pathrev=6351
 M http://src.chromium.org/viewvc/native_client/trunk/src/native_client/src/trusted/validator_x86/testdata/32/test-5.nvals?r1=6351&amp;r2=6350&amp;pathrev=6351
 A http://src.chromium.org/viewvc/native_client/trunk/src/native_client/src/trusted/validator_x86/testdata/32/test-4.nvalds16?r1=6351&amp;r2=6350&amp;pathrev=6351
 A http://src.chromium.org/viewvc/native_client/trunk/src/native_client/src/trusted/validator_x86/testdata/32/branch-middle.ndis?r1=6351&amp;r2=6350&amp;pathrev=6351
 M http://src.chromium.org/viewvc/native_client/trunk/src/native_client/src/trusted/validator/x86/ncval_seg_sfi/ncvalidate.h?r1=6351&amp;r2=6350&amp;pathrev=6351
 A http://src.chromium.org/viewvc/native_client/trunk/src/native_client/src/trusted/validator_x86/testdata/32/test-18.nvalds?r1=6351&amp;r2=6350&amp;pathrev=6351
 M http://src.chromium.org/viewvc/native_client/trunk/src/native_client/src/trusted/validator_x86/testdata/32/README?r1=6351&amp;r2=6350&amp;pathrev=6351
 M http://src.chromium.org/viewvc/native_client/trunk/src/native_client/src/trusted/validator_x86/ncval.c?r1=6351&amp;r2=6350&amp;pathrev=6351
 A http://src.chromium.org/viewvc/native_client/trunk/src/native_client/src/trusted/validator_x86/testdata/32/inst-crosses.ndis?r1=6351&amp;r2=6350&amp;pathrev=6351
 A http://src.chromium.org/viewvc/native_client/trunk/src/native_client/src/trusted/validator_x86/testdata/32/inst-crosses.nvals16?r1=6351&amp;r2=6350&amp;pathrev=6351
 A http://src.chromium.org/viewvc/native_client/trunk/src/native_client/src/trusted/validator_x86/testdata/32/branch-middle.hex?r1=6351&amp;r2=6350&amp;pathrev=6351
 A http://src.chromium.org/viewvc/native_client/trunk/src/native_client/src/trusted/validator_x86/testdata/32/inst-crosses.nvalds16?r1=6351&amp;r2=6350&amp;pathrev=6351
 A http://src.chromium.org/viewvc/native_client/trunk/src/native_client/src/trusted/validator/x86/ncval_seg_sfi/ncvalidate_detailed.c?r1=6351&amp;r2=6350&amp;pathrev=6351
 A http://src.chromium.org/viewvc/native_client/trunk/src/native_client/src/trusted/validator_x86/testdata/32/branch-middle.nvals?r1=6351&amp;r2=6350&amp;pathrev=6351
 A http://src.chromium.org/viewvc/native_client/trunk/src/native_client/src/trusted/validator/x86/ncval_seg_sfi/ncvalidate_detailed.h?r1=6351&amp;r2=6350&amp;pathrev=6351
 A http://src.chromium.org/viewvc/native_client/trunk/src/native_client/src/trusted/validator_x86/testdata/32/test-4.nvalds?r1=6351&amp;r2=6350&amp;pathrev=6351
 A http://src.chromium.org/viewvc/native_client/trunk/src/native_client/src/trusted/validator_x86/testdata/32/test-18.nvals16?r1=6351&amp;r2=6350&amp;pathrev=6351
 M http://src.chromium.org/viewvc/native_client/trunk/src/native_client/src/trusted/validator/x86/ncval_seg_sfi/ncvalidate_internaltypes.h?r1=6351&amp;r2=6350&amp;pathrev=6351
 A http://src.chromium.org/viewvc/native_client/trunk/src/native_client/src/trusted/validator_x86/testdata/32/bad-jmp.nvalds?r1=6351&amp;r2=6350&amp;pathrev=6351
 A http://src.chromium.org/viewvc/native_client/trunk/src/native_client/src/trusted/validator_x86/testdata/32/test-18.ndis?r1=6351&amp;r2=6350&amp;pathrev=6351
 M http://src.chromium.org/viewvc/native_client/trunk/src/native_client/src/trusted/validator/x86/ncval_seg_sfi/build.scons?r1=6351&amp;r2=6350&amp;pathrev=6351
 A http://src.chromium.org/viewvc/native_client/trunk/src/native_client/src/trusted/validator_x86/testdata/32/test-5.nvalds16?r1=6351&amp;r2=6350&amp;pathrev=6351
 M http://src.chromium.org/viewvc/native_client/trunk/src/native_client/src/trusted/validator_x86/testdata/32/test-1.nvals16?r1=6351&amp;r2=6350&amp;pathrev=6351
 M http://src.chromium.org/viewvc/native_client/trunk/src/native_client/src/trusted/validator/x86/32/ncvalidate.c?r1=6351&amp;r2=6350&amp;pathrev=6351
 A http://src.chromium.org/viewvc/native_client/trunk/src/native_client/src/trusted/validator_x86/testdata/32/branch-middle.nvalds?r1=6351&amp;r2=6350&amp;pathrev=6351
 M http://src.chromium.org/viewvc/native_client/trunk/src/native_client/src/trusted/validator/x86/ncval_seg_sfi/ncval_seg_sfi.gyp?r1=6351&amp;r2=6350&amp;pathrev=6351
 M http://src.chromium.org/viewvc/native_client/trunk/src/native_client/src/trusted/validator_x86/ncval_tests.c?r1=6351&amp;r2=6350&amp;pathrev=6351
 M http://src.chromium.org/viewvc/native_client/trunk/src/native_client/src/trusted/validator/x86/32/ncvalidate_verbose.c?r1=6351&amp;r2=6350&amp;pathrev=6351
 M http://src.chromium.org/viewvc/native_client/trunk/src/native_client/src/trusted/validator_x86/build.scons?r1=6351&amp;r2=6350&amp;pathrev=6351
 A http://src.chromium.org/viewvc/native_client/trunk/src/native_client/src/trusted/validator_x86/testdata/32/test-18.nvalds16?r1=6351&amp;r2=6350&amp;pathrev=6351
 A http://src.chromium.org/viewvc/native_client/trunk/src/native_client/src/trusted/validator_x86/testdata/32/inst-crosses.hex?r1=6351&amp;r2=6350&amp;pathrev=6351
 A http://src.chromium.org/viewvc/native_client/trunk/src/native_client/src/trusted/validator_x86/testdata/32/inst-crosses.nvals?r1=6351&amp;r2=6350&amp;pathrev=6351
 A http://src.chromium.org/viewvc/native_client/trunk/src/native_client/src/trusted/validator_x86/testdata/32/test-18.hex?r1=6351&amp;r2=6350&amp;pathrev=6351
 A http://src.chromium.org/viewvc/native_client/trunk/src/native_client/src/trusted/validator_x86/testdata/32/bad-jmp.hex?r1=6351&amp;r2=6350&amp;pathrev=6351
 A http://src.chromium.org/viewvc/native_client/trunk/src/native_client/src/trusted/validator_x86/testdata/32/test-18.nvals?r1=6351&amp;r2=6350&amp;pathrev=6351
 A http://src.chromium.org/viewvc/native_client/trunk/src/native_client/src/trusted/validator_x86/testdata/32/test-5.nvalds?r1=6351&amp;r2=6350&amp;pathrev=6351
 M http://src.chromium.org/viewvc/native_client/trunk/src/native_client/src/trusted/validator_x86/testdata/32/test-1.nvals?r1=6351&amp;r2=6350&amp;pathrev=6351

Modify the x86-32 validator to generate more detailed messages when not in
sel_ldr. Does this by rewalking code a second time when run in ncval.

BUG= http://code.google.com/p/nativeclient/issues/detail?id=2005
TEST=src/trusted/validator_x86/testdata/32/inst-crosses.nvalds16
TEST=src/trusted/validator_x86/testdata/32/test-4.nvalds
TEST=src/trusted/validator_x86/testdata/32/bad-jmp.nvalds
TEST=src/trusted/validator_x86/testdata/32/branch-middle.nvalds
TEST=src/trusted/validator_x86/testdata/32/test-4.nvalds16
TEST=src/trusted/validator_x86/testdata/32/test-5.nvalds16
TEST=src/trusted/validator_x86/testdata/32/test-5.nvalds
TEST=src/trusted/validator_x86/testdata/32/test-18.nvalds
TEST=src/trusted/validator_x86/testdata/32/test-18.nvalds16
Review URL: http://codereview.chromium.org/7550014
------------------------------------------------------------------------</ns0:content><ns0:updated>2011-08-08T22:27:32.000Z</ns0:updated><ns0:published>2011-08-08T22:27:32.000Z</ns0:published><ns2:updates /><ns0:title>Comment 2 by bugdro...@chromium.org</ns0:title><ns0:link href="http://code.google.com/p/nativeclient/issues/detail?id=2005#c2" rel="alternate" type="text/html" /><ns0:link href="https://code.google.com/feeds/issues/p/nativeclient/issues/2005/comments/full/2" rel="self" type="application/atom+xml" /></ns0:entry>