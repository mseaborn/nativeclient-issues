<ns0:entry xmlns:ns0="http://www.w3.org/2005/Atom" xmlns:ns1="http://schemas.google.com/g/2005" xmlns:ns2="http://schemas.google.com/projecthosting/issues/2009" ns1:etag="W/&quot;A0UBQH47eCl7ImA9WhJQFEw.&quot;">
		<ns0:id>http://code.google.com/feeds/issues/p/nativeclient/issues/full/2869</ns0:id><ns0:author>
			<ns0:name>mcgra...@chromium.org</ns0:name><ns0:uri>/u/109286297231979736865/</ns0:uri></ns0:author><ns0:content type="html">In newer Intel processors, the encoding &amp;quot;rep bsf&amp;quot; is now &amp;quot;tzcnt&amp;quot; and &amp;quot;rep bsr&amp;quot; is now &amp;quot;lzcnt&amp;quot;.  The new instructions have almost the same semantics as their older counterparts (they differ in how they set the condition codes, and in what the result is when the input is zero).  The compiler people seem to think that &amp;quot;tzcnt is usually faster than bsf&amp;quot;, so when targetting a generic processor that may or may not support &amp;quot;tzcnt&amp;quot;, they like to emit &amp;quot;rep bsf&amp;quot; and use it in a way where the semantic differences don't matter to them.  On older processors, the &amp;quot;rep&amp;quot; prefix is ignored and the instruction is &amp;quot;bsf&amp;quot; (or &amp;quot;bsr&amp;quot;).  On newer processors, the instruction is decoded as &amp;quot;tzcnt&amp;quot; (or &amp;quot;lzcnt&amp;quot;).

David and I agreed that it makes sense for the validator(s) to permit the &amp;quot;rep&amp;quot; prefix on &amp;quot;bsf&amp;quot; and &amp;quot;bsr&amp;quot; so that a compiler is free to use this new optimization.</ns0:content><ns0:updated>2012-07-27T20:00:51.000Z</ns0:updated><ns0:published>2012-06-21T18:38:15.000Z</ns0:published><ns2:status>Fixed</ns2:status><ns2:owner>
			<ns2:uri>/u/108470876877739532758/</ns2:uri><ns2:username>kschi...@google.com</ns2:username></ns2:owner><ns2:cc>
			<ns2:uri>/u/108394971971967673680/</ns2:uri><ns2:username>s...@google.com</ns2:username></ns2:cc><ns2:cc>
			<ns2:uri>/u/112873510090665368075/</ns2:uri><ns2:username>k...@google.com</ns2:username></ns2:cc><ns2:state>closed</ns2:state><ns0:title>accept rep prefix on bsf/bsr instructions</ns0:title><ns2:label>Type-Enhancement</ns2:label><ns2:label>Mstone-</ns2:label><ns2:label>Pri-2</ns2:label><ns2:label>Component-TCB-Validator</ns2:label><ns2:label>OS-All</ns2:label><ns2:label>Arch-x86-32</ns2:label><ns2:label>Arch-x86-64</ns2:label><ns0:link href="http://code.google.com/feeds/issues/p/nativeclient/issues/2869/comments/full" rel="replies" type="application/atom+xml" /><ns0:link href="http://code.google.com/p/nativeclient/issues/detail?id=2869" rel="alternate" type="text/html" /><ns0:link href="https://code.google.com/feeds/issues/p/nativeclient/issues/full/2869" rel="self" type="application/atom+xml" /><ns2:stars>1</ns2:stars><ns2:closedDate>2012-07-27T20:00:51.000Z</ns2:closedDate><ns2:id>2869</ns2:id></ns0:entry>