<ns0:entry xmlns:ns0="http://www.w3.org/2005/Atom" xmlns:ns1="http://schemas.google.com/g/2005" xmlns:ns2="http://schemas.google.com/projecthosting/issues/2009" ns1:etag="W/&quot;CUENRX47eCl7ImA9WhNWEkU.&quot;">
		<ns0:id>http://code.google.com/feeds/issues/p/nativeclient/issues/3054/comments/full/5</ns0:id><ns0:author>
			<ns0:name>mseaborn@chromium.org</ns0:name><ns0:uri>/u/mseaborn@chromium.org/</ns0:uri></ns0:author><ns0:content type="html">Following Andrey's change, https://src.chromium.org/viewvc/native_client?view=rev&amp;revision=10111, this bug now manifests itself as exit status 0xff rather than exit status 0xffffffff, so many tests print:

  ERROR: Command returned exit status 255 (0xff) but we expected 0 (0x0)

I now understand where the value of -1 is coming from.  nap-&gt;exit_status is initialised to -1 in NaClAppCtor().  If a NaClAppThread starts to exit before NaCl's exit() syscall has been called, it will read nap-&gt;exit_status as -1.  This can be what is returned as the process's exit status, as explained in issue 2870.
</ns0:content><ns0:updated>2012-12-12T03:41:34.000Z</ns0:updated><ns0:published>2012-12-12T03:41:34.000Z</ns0:published><ns2:updates>
			<ns2:summary>Thread tests on Windows sometimes fail with "exit status 255 (0xff)"</ns2:summary></ns2:updates><ns0:title>Comment 5 by mseaborn@chromium.org</ns0:title><ns0:link href="http://code.google.com/p/nativeclient/issues/detail?id=3054#c5" rel="alternate" type="text/html" /><ns0:link href="https://code.google.com/feeds/issues/p/nativeclient/issues/3054/comments/full/5" rel="self" type="application/atom+xml" /></ns0:entry>